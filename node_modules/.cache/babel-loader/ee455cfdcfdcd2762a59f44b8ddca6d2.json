{"ast":null,"code":"import _classCallCheck from\"/Users/adam.tothfejel/Desktop/LabelBoxFolder/BirdHouse/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/adam.tothfejel/Desktop/LabelBoxFolder/BirdHouse/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import Query from\"../models/Query\";import Utils from'./Utils';import config from'../config.json';//let config = require('../config.json');\nvar NavControls=/*#__PURE__*/function(){function NavControls(){_classCallCheck(this,NavControls);}_createClass(NavControls,null,[{key:\"cookbookisOpen\",//VERTICALS\n//Business Objective Functions\n//Pain Point Functions\nvalue:function cookbookisOpen(app){return app.getUIState(\"cookbook\").isOpen;}},{key:\"onClickCookbook\",value:function onClickCookbook(){this.setUIState(\"cookbook\",{isOpen:true});}},{key:\"cookbookisClosed\",value:function cookbookisClosed(){this.setUIState(\"cookbook\",{isOpen:false});}}]);return NavControls;}();NavControls.loadCardTypes=function(){return config.cardViews;};NavControls.currentCardView=function(app){var cards=app.getUIConfig(\"cards\");for(var i in config.cardViews){if(config.cardViews[i].key===cards){var returnval={label:config.cardViews[i].label,value:cards};return returnval;}}return{label:\"None\"};};NavControls.loadProducts=function(){return config.products;};NavControls.loadUserTypes=function(app){var userTypes=[];var tablesWithUsers=[\"story\",\"theme\",\"feature\"];var _loop=function _loop(i){var key=tablesWithUsers[i];var field=config.elements[key].valueFields.usertype;var query=new Query({app:app,query:key,limit:null});var user_types=query.objects.map(function(item){return item.data[field];});for(var j in user_types){var type=user_types[j];if(!Array.isArray(type))type=[type];for(var k in type){userTypes.push(type[k]);}}};for(var i in tablesWithUsers){_loop(i);}userTypes=Utils.dedupe(userTypes);userTypes=Utils.sortFieldArray(userTypes,\"usertype\");userTypes=[\"—Any User Type—\"].concat(userTypes);return userTypes;};NavControls.currentUserType=function(app){var type=this.getUserType(app);if(type===undefined)return\"—Any User Type—\";return type;};NavControls.setUserType=function(val){this.deleteFilter(\"usertype\");if(val===\"—Any User Type—\")return false;this.setFilter(\"usertype\",[val],\"whitelist\");};NavControls.getUserType=function(app){var userfilter=app.getFilter(\"usertype\");return userfilter.criteria[0];};NavControls.loadVerticals=function(app){var verticalQuery=new Query({app:app,query:\"story\",map:\"vertical\"});//, limit:null\nvar verticals=verticalQuery.objects.map(function(item){return{\"value\":item.data.id,\"label\":item.data.Vertical,badges:[\"X Themes\"]};});verticals.push({label:\"—Any Vertical—\",value:null});return verticals.reverse();};NavControls.currentVertical=function(app){var id=NavControls.getVertical(app);var objects=NavControls.loadVerticals(app);for(var i in objects){if(id===objects[i].value)return objects[i];}return objects[0];};NavControls.setVertical=function(selection){this.deleteFilter(\"vertical\");if(selection.value===null)return false;this.setFilter(\"vertical\",[selection.value],\"whitelist\");};NavControls.getVertical=function(app){var vertfilter=app.getFilter(\"vertical\");return vertfilter.criteria[0];};NavControls.loadFilters=function(){return config.multiSelectFilters;};NavControls.currentFilter=function(app){var filters=config.multiSelectFilters;var currentKey=app.state.config.ui.filter;for(var i in filters){if(currentKey===filters[i].key)return filters[i];}return filters[0];};NavControls.setFilter=function(val){var filters=config.multiSelectFilters;for(var i in filters){this.deleteFilter(filters[i].key);}this.setUIConfig(\"filter\",val.key);};NavControls.getCardView=function(app){app.getUIConfig(\"cards\");};NavControls.setCardView=function(val){this.setUIConfig(\"cards\",val.key);this.setUIConfig(\"grouping\",null);};NavControls.multiSelect=function(app,key,a){var currentKey=app.state.config.ui.filter;var functions={title:\"Business Objectives\",label:this.labelBusinessObjectives(app),options:this.loadBusinessObjectives(app),selected:this.selectedBusinessObjectives(app),onSelect:this.onSelectBusinessObjective.bind(app),onDeselect:this.onDeselectBusinessObjective.bind(app)};if(currentKey===\"painpoint\"){functions={title:\"Pain Points\",label:this.labelPainPoints(app),options:this.loadPainPoints(app),selected:this.selectedPainPoints(app),onSelect:this.onSelectPainPoint.bind(app),onDeselect:this.onDeselectPainPoint.bind(app)};}return functions[key];};NavControls.labelBusinessObjectives=function(app){var count=this.selectedBusinessObjectives(app).length;if(count===0)return\"Select Business Objectives\";return count+\" Business Objective\"+(count>1?\"s\":\"\");};NavControls.loadAllBusinessObjectives=function(app){var objectiveQuery=new Query({app:app,query:\"objective\"});return objectiveQuery.objects.map(function(item){return{\"value\":item.data.id,\"label\":item.data.Objective,type:\"objective\"};});};NavControls.loadBusinessObjectives=function(app){var objectiveQuery=new Query({app:app,query:\"story\",map:\"objective\",limit:[\"vertical\",\"usertype\"]});return objectiveQuery.objects.map(function(item){return{\"value\":item.data.id,\"label\":item.data.Objective,type:\"objective\"};});};NavControls.selectedBusinessObjectives=function(app){var filter=app.getFilter(\"objective\");return filter.criteria;};NavControls.onSelectBusinessObjective=function(selection){var filter=this.getFilter(\"objective\");filter.criteria.push(selection.value);var criteria=Utils.dedupe(filter.criteria);this.setFilter(\"objective\",criteria,\"whitelist\");};NavControls.onDeselectBusinessObjective=function(selection){var filter=this.getFilter(\"objective\");var criteria=Utils.removeFromArray(filter.criteria,selection.value);this.setFilter(\"objective\",criteria,\"whitelist\");};NavControls.labelPainPoints=function(app){var count=this.selectedPainPoints(app).length;if(count===0)return\"Select Pain Points\";return count+\" Pain Point\"+(count>1?\"s\":\"\");};NavControls.loadPainPoints=function(app){var painPointQuery=new Query({app:app,query:\"story\",map:\"painpoint\",limit:[\"vertical\",\"usertype\"]});var tmp=painPointQuery.objects.map(function(item){return{\"value\":item.data.id,\"label\":item.data['Pain Point']};});return tmp;};NavControls.selectedPainPoints=function(app){var filter=app.getFilter(\"painpoint\");return filter.criteria;};NavControls.onSelectPainPoint=function(selection){var filter=this.getFilter(\"painpoint\");filter.criteria.push(selection.value);var criteria=Utils.dedupe(filter.criteria);this.setFilter(\"painpoint\",criteria,\"whitelist\");};NavControls.onDeselectPainPoint=function(selection){var filter=this.getFilter(\"painpoint\");var criteria=Utils.removeFromArray(filter.criteria,selection.value);this.setFilter(\"painpoint\",criteria,\"whitelist\");};NavControls.loadCardGroups=function(){return config.cardViews;};export{NavControls as default};","map":{"version":3,"sources":["/Users/adam.tothfejel/Desktop/LabelBoxFolder/BirdHouse/src/controllers/NavControls.js"],"names":["Query","Utils","config","NavControls","app","getUIState","isOpen","setUIState","loadCardTypes","cardViews","currentCardView","cards","getUIConfig","i","key","returnval","label","value","loadProducts","products","loadUserTypes","userTypes","tablesWithUsers","field","elements","valueFields","usertype","query","limit","user_types","objects","map","item","data","j","type","Array","isArray","k","push","dedupe","sortFieldArray","concat","currentUserType","getUserType","undefined","setUserType","val","deleteFilter","setFilter","userfilter","getFilter","criteria","loadVerticals","verticalQuery","verticals","id","Vertical","badges","reverse","currentVertical","getVertical","setVertical","selection","vertfilter","loadFilters","multiSelectFilters","currentFilter","filters","currentKey","state","ui","filter","setUIConfig","getCardView","setCardView","multiSelect","a","functions","title","labelBusinessObjectives","options","loadBusinessObjectives","selected","selectedBusinessObjectives","onSelect","onSelectBusinessObjective","bind","onDeselect","onDeselectBusinessObjective","labelPainPoints","loadPainPoints","selectedPainPoints","onSelectPainPoint","onDeselectPainPoint","count","length","loadAllBusinessObjectives","objectiveQuery","Objective","removeFromArray","painPointQuery","tmp","loadCardGroups"],"mappings":"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","sourcesContent":["import Query from \"../models/Query\";\nimport Utils from './Utils';\nimport config from '../config.json';\n//let config = require('../config.json');\n\nexport default class NavControls {\n\n    static loadCardTypes = function () {\n\n        return config.cardViews;\n    }\n\n    static currentCardView = function (app)\n    {\n        let cards = app.getUIConfig(\"cards\");\n        for(let i in config.cardViews)\n        {\n            if(config.cardViews[i].key===cards)\n            {\n                let returnval = {label : config.cardViews[i].label, value : cards};\n                return returnval;\n            } \n        } \n        return {label : \"None\"};\n    }\n\n    static loadProducts = function () {\n\n        return config.products;\n    }\n\n\n\n    static loadUserTypes = function (app) {\n\n        let userTypes = [];\n        let tablesWithUsers = [\"story\",\"theme\",\"feature\"];\n        for(let i in tablesWithUsers)\n        {\n            let key = tablesWithUsers[i];\n            let field = config.elements[key].valueFields.usertype;\n            let query = new Query({ app: app, query: key, limit: null });\n            let user_types = query.objects.map(item => item.data[field]);\n            for(let j in user_types)\n            {\n                let type = user_types[j];\n                if(!Array.isArray(type)) type = [type];\n                for(let k in type) userTypes.push(type[k]);\n            }\n        }\n        userTypes = Utils.dedupe(userTypes);\n        userTypes = Utils.sortFieldArray(userTypes,\"usertype\");\n        userTypes = [\"—Any User Type—\"].concat(userTypes);\n        return userTypes;\n    }\n\n    static currentUserType = function (app) {\n        let type =  this.getUserType(app);\n        if(type===undefined) return \"—Any User Type—\"\n        return type;\n    }\n\n    static setUserType = function (val) {\n        this.deleteFilter(\"usertype\");\n        if (val === \"—Any User Type—\") return false;\n        this.setFilter(\"usertype\", [val], \"whitelist\");\n    }\n\n    static getUserType = function (app) {\n        let userfilter = app.getFilter(\"usertype\");\n        return userfilter.criteria[0];\n    }\n\n\n\n    //VERTICALS\n\n\n    static loadVerticals = function (app) {\n\n        let verticalQuery = new Query({ app: app, query: \"story\", map: \"vertical\" }); //, limit:null\n        let verticals = verticalQuery.objects.map(item => (\n            { \"value\": item.data.id, \"label\": item.data.Vertical, badges: [\"X Themes\"] }\n        ))\n        verticals.push({ label: \"—Any Vertical—\", value: null });\n        return verticals.reverse();\n    }\n\n    static currentVertical = function (app) {\n\n        let id = NavControls.getVertical(app);\n        let objects = NavControls.loadVerticals(app);\n        for (let i in objects) if (id === objects[i].value) return objects[i];\n        return objects[0];\n    }\n\n    static setVertical = function (selection) {\n\n        this.deleteFilter(\"vertical\");\n        if (selection.value===null) return false;\n        this.setFilter(\"vertical\", [selection.value], \"whitelist\");\n    }\n\n    static getVertical = function (app) {\n        let vertfilter = app.getFilter(\"vertical\");\n        return vertfilter.criteria[0];\n    }\n\n    static loadFilters = function () {\n        return config.multiSelectFilters;\n\n    }\n\n    static currentFilter = function (app) {\n\n        let filters = config.multiSelectFilters;\n        let currentKey = app.state.config.ui.filter;\n        for (let i in filters) if (currentKey === filters[i].key) return filters[i];\n        return filters[0];\n    }\n\n    static setFilter = function (val) {\n\n        let filters = config.multiSelectFilters;\n        for (var i in filters) this.deleteFilter(filters[i].key);\n        this.setUIConfig(\"filter\", val.key);\n    }\n\n\n\n\n    static getCardView = function (app) {\n        app.getUIConfig(\"cards\");\n    }\n    static setCardView = function (val) {\n\n        this.setUIConfig(\"cards\", val.key);\n        this.setUIConfig(\"grouping\", null);\n    }\n\n\n    static multiSelect = function (app, key, a) {\n        let currentKey = app.state.config.ui.filter;\n\n\n        let functions = {\n            title: \"Business Objectives\",\n            label: this.labelBusinessObjectives(app),\n            options: this.loadBusinessObjectives(app),\n            selected: this.selectedBusinessObjectives(app),\n            onSelect: this.onSelectBusinessObjective.bind(app),\n            onDeselect: this.onDeselectBusinessObjective.bind(app)\n        }\n\n        if (currentKey === \"painpoint\") {\n            functions = {\n                title: \"Pain Points\",\n                label: this.labelPainPoints(app),\n                options: this.loadPainPoints(app),\n                selected: this.selectedPainPoints(app),\n                onSelect: this.onSelectPainPoint.bind(app),\n                onDeselect: this.onDeselectPainPoint.bind(app)\n            }\n        }\n        return functions[key];\n    }\n\n    //Business Objective Functions\n\n\n    static labelBusinessObjectives = function (app) {\n\n        let count = this.selectedBusinessObjectives(app).length;\n        if (count === 0) return \"Select Business Objectives\";\n        return count + \" Business Objective\" + ((count > 1) ? \"s\" : \"\");\n\n    }\n    static loadAllBusinessObjectives = function (app) {\n        let objectiveQuery = new Query({ app: app, query: \"objective\" });\n        return objectiveQuery.objects.map(item => (\n            { \"value\": item.data.id, \"label\": item.data.Objective, type: \"objective\" }\n        ))\n    }\n    static loadBusinessObjectives = function (app) {\n        let objectiveQuery = new Query({ app: app,  query: \"story\", map: \"objective\", limit:[\"vertical\",\"usertype\"] } );\n        return objectiveQuery.objects.map(item => (\n            { \"value\": item.data.id, \"label\": item.data.Objective, type: \"objective\" }\n        ))\n    }\n    static selectedBusinessObjectives = function (app) {\n\n        let filter = app.getFilter(\"objective\");\n        return filter.criteria;\n\n    }\n    static onSelectBusinessObjective = function (selection) {\n\n        let filter = this.getFilter(\"objective\");\n        filter.criteria.push(selection.value);\n        let criteria = Utils.dedupe(filter.criteria);\n        this.setFilter(\"objective\", criteria, \"whitelist\");\n    }\n\n    static onDeselectBusinessObjective = function (selection) {\n        let filter = this.getFilter(\"objective\");\n        let criteria = Utils.removeFromArray(filter.criteria, selection.value);\n        this.setFilter(\"objective\", criteria, \"whitelist\");\n    }\n\n\n    //Pain Point Functions\n\n\n    static labelPainPoints = function (app) {\n\n        let count = this.selectedPainPoints(app).length;\n        if (count === 0) return \"Select Pain Points\";\n        return count + \" Pain Point\" + ((count > 1) ? \"s\" : \"\");\n\n    }\n    static loadPainPoints = function (app) {\n\n        let painPointQuery = new Query({ app: app, query: \"story\", map: \"painpoint\", limit: [\"vertical\",\"usertype\"] });\n        let tmp = painPointQuery.objects.map(item => (\n            { \"value\": item.data.id, \"label\": item.data['Pain Point'] }\n        ))\n        return tmp;\n    }\n    static selectedPainPoints = function (app) {\n\n        let filter = app.getFilter(\"painpoint\");\n        return filter.criteria;\n\n    }\n    static onSelectPainPoint = function (selection) {\n\n        let filter = this.getFilter(\"painpoint\");\n        filter.criteria.push(selection.value);\n        let criteria = Utils.dedupe(filter.criteria);\n        this.setFilter(\"painpoint\", criteria, \"whitelist\");\n    }\n\n    static onDeselectPainPoint = function (selection) {\n        let filter = this.getFilter(\"painpoint\");\n        let criteria = Utils.removeFromArray(filter.criteria, selection.value);\n        this.setFilter(\"painpoint\", criteria, \"whitelist\");\n    }\n\n\n    static loadCardGroups = function () {\n\n        return config.cardViews;\n    }\n\n\n    static cookbookisOpen(app) {\n        return app.getUIState(\"cookbook\").isOpen;\n    }\n\n    static onClickCookbook() {\n        this.setUIState(\"cookbook\", { isOpen: true });\n    }\n\n    static cookbookisClosed()\n    {\n        this.setUIState(\"cookbook\", { isOpen: false });\n    }\n\n\n}\n"]},"metadata":{},"sourceType":"module"}